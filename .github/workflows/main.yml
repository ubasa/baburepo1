name: Test phython env in github
on: [push]
jobs:
  detect-secrets:
    runs-on: ubuntu-latest
  
    steps:
    - name: checkout
      uses: actions/checkout@v3

    - name: Set python env
      uses: actions/setup-python@v2
      with:
        python-version: '3.9.x'
      
    - name: Install git-secret packages
      run: |
        sudo apt-get update
        echo "inside install section"
        python --version
        sudo apt-get install python3-pip
        echo -e "\n---------"
        which pip3
        echo -e "\n---------"
        pip3 install pre-commit
        echo "repos:
            - repo: https://github.com/Yelp/detect-secrets
              rev: v1.3.0
              hooks:
              - id: detect-secrets" > .pre-commit-config.yaml
        echo "### pre-commit-config.yaml data"
        cat .pre-commit-config.yaml
      
        pre-commit install    
        pre-commit install pre-push
      
        ls -ltr .git/hooks/
      
